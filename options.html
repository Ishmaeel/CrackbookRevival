<html>
<head>

  <script src="lib.js"></script>
  <script src="options.js"></script>

  <link rel="stylesheet" href="options.css" type="text/css" />

  <script>
    window.onload = function() {
      document.getElementById('add_domain_button').onclick = addNewDomain;
      document.getElementById('save_button').onclick = saveSettings;

      if (getJunkDomains().length == 0)
        loadTopUrls();
    }
  </script>

  <!-- Google Analytics -->
  <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-6080477-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = 'https://ssl.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body>

  <div id="heading">Crackbook settings</div>

  <p>
  <label>Start blocking junk sites after <input id="dimmerThreshold" name="dimmerThreshold" type="text" /> hits a day</label>
  </p>
  <script>
    document.getElementById("dimmerThreshold").value = getLocal('dimmerThreshold');
  </script>

  <p>
  <label>Delay junk sites for <input id="dimmerDelay" name="dimmerDelay" type="text" /> seconds</label>
  </p>
  <script>
    document.getElementById("dimmerDelay").value = getLocal('dimmerDelay');
  </script>

  <div id="junkListHeader">Junk site list</div>

  <ul id="topVisited">
    <li id="placeholder">Please wait...</li>
    <li><button id="add_domain_button">Add domain</button></li>
  </ul>

  <script>
    loadSavedUrls();
  </script>

  <div>
    <label>
      <input id="upload_stats" name="upload_stats" type="checkbox" />Contribute usage data
    </label>
    <div id="privacyDetails">
      Your extension settings (including the list of junk sites) and times
      of visits to the junk sites will be uploaded anonymously. Statistics
      are available at <a id="crackbookLink" href="#">http://crackbook.info</a>.
    </div>
  </div>

  <script>
    if (getLocal('reporting'))
      document.getElementById("upload_stats").checked = true;
    document.getElementById('crackbookLink').onclick = function() {
      chrome.tabs.create({url: 'http://crackbook.info'});
    }
  </script>

  <p>
    <button id="save_button">Save</button>
  </p>

  <span id="saved_message" style="display: none">
    Domains saved.
  </span>

  <p></p>

</body>
</html>
